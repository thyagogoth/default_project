<!-- %header% -->
<script type="text/javascript" src="{%HTTP_MODULE_PATH%}js/cadastrar-usuario.js"></script>
<script language="javascript">
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $('#image-preview').attr('src', e.target.result);
            };
            reader.readAsDataURL(input.files[0]);
        }
    }
</script>
<!-- %body% -->

<main id="js-page-content" role="main" class="page-content">
    {%breadcrumb%}

    <div class="subheader">
        <h1 class="subheader-title">
            <i class='subheader-icon fal fa-edit'></i> Cadastrando: <span class='fw-300'>Usuários</span>
            <small>
                Cadastro de usuário para gerenciamento do sistema
            </small>
        </h1>
    </div>
    <!-- %alert-box% -->
    <div class="alert alert-{%type%}">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true"><i class="fal fa-times-circle"></i></span>
        </button>
        <div class="d-flex flex-start w-100">
            <div class="mr-2 hidden-md-down">
                <span class="icon-stack icon-stack-lg">
                    <i class="base base-2 icon-stack-3x opacity-100 color-{%type%}-500"></i>
                    <i class="base base-2 icon-stack-2x opacity-100 color-{%type%}-300"></i>
                    <i class="fal fa-info icon-stack-1x opacity-100 color-white"></i>
                </span>
            </div>
            <div class="d-flex flex-fill">
                <div class="flex-fill">
                    <span class="h5">{%title%}</span>
                    {%msg-sistema%}
                </div>
            </div>
        </div>
    </div>
    <!-- %end-alert-box% -->

    <div id="panel-2" class="panel">
        <div class="panel-hdr">
            <h2>
                Formulário <span class="fw-300"><i>de cadastro</i></span>
            </h2>
        </div>
        <form method="post" class="needs-validation" enctype="multipart/form-data" novalidate>
            <input type="hidden" name="id" value="{%cod-usuario%}" />
            <div class="row">
                <div class="col-xl-6">
                    <div class="panel-container show">
                        <div class="panel-content p-0">
                            <div class="panel-content">
                                <div class="form-row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label" for="nome">Nome completo <span class="text-danger">*</span> </label>
                                        <input type="text" class="form-control form-control-lg rounded-0 border-top-0 border-left-0 border-right-0 px-0" id="nome"
                                            placeholder="Nome completo" name="nome" value="{%nome%}" required>
                                        <!-- <div class="valid-feedback">Parece estar OK</div> -->
                                        <div class="invalid-feedback">Informe o nome completo</div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label" for="email">E-mail <span class="text-danger">*</span></label>
                                        <input type="email" class="form-control form-control-lg rounded-0 border-top-0 border-left-0 border-right-0 px-0" id="email"
                                            placeholder="E-mail" name="email" value="{%email%}" required>
                                        <div class="invalid-feedback">Informe o e-mail do usuário</div>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label" for="permissao">Permissão <span class="text-danger">*</span> </label>
                                        <select name="permissao" class="custom-select form-control-lg rounded-0 border-top-0 border-left-0 border-right-0 px-0">
                                            <option selected="">Que permissão terá este usuário?</option>
                                            <!-- %loop-permissao% -->
                                            <option value="{%id%}" {%selected%}>{%nome%}</option>
                                            <!-- %end-loop-permissao% -->
                                        </select>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label" for="senha">Senha <span class="text-danger">*</span> </label>
                                        <input type="password" class="form-control form-control-lg rounded-0 border-top-0 border-left-0 border-right-0 px-0" id="senha"
                                            placeholder="Digite uma senha" name="senha" value="">
                                        <div class="invalid-feedback">Digite uma senha de acesso</div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label" for="repita_senha">Repita a senha <span class="text-danger">*</span></label>
                                        <input type="password" class="form-control form-control-lg rounded-0 border-top-0 border-left-0 border-right-0 px-0" id="repita_senha"
                                            placeholder="Repita a senha" name="repita_senha" value="">
                                        <div class="invalid-feedback">Repita a senha de acesso</div>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="custom-control custom-switch">
                                        <input type="checkbox" class="custom-control-input" id="customSwitch2" name="ativo" {%ativo_checked%}>
                                        <label class="custom-control-label" for="customSwitch2">Ativo?</label>
                                    </div>
                                </div>

                            </div>

                            <script>
                                // Example starter JavaScript for disabling form submissions if there are invalid fields
                                (function () {
                                    'use strict';
                                    window.addEventListener('load', function () {
                                        // Fetch all the forms we want to apply custom Bootstrap validation styles to
                                        var forms = document.getElementsByClassName('needs-validation');
                                        // Loop over them and prevent submission
                                        var validation = Array.prototype.filter.call(forms, function (form) {
                                            form.addEventListener('submit', function (event) {
                                                if (form.checkValidity() === false) {
                                                    event.preventDefault();
                                                    event.stopPropagation();
                                                }
                                                form.classList.add('was-validated');
                                            }, false);
                                        });
                                    }, false);
                                })();
                            </script>
                        </div>
                    </div>
                </div>

                <div class="col-xl-6">
                    <div class="panel-container show">
                        <div class="panel-content">
                            <h5 class="frame-heading">Foto do perfil</h5>

                            <div class="upload-box">
                                <div class="hold">
                                    <label for="avatar" class="form-label mt-2 ml-1">Tamanho máximo: 2 MB - 640x480 pixels</label>
                                    <span class="btn btn-file btn-primary"> <i class="fal fa-search"></i> PROCURAR
                                        <input type="file" id="avatar" name="avatar" onchange="readURL(this)">
                                    </span>
                                </div>
                                <img class="mt-2" id="image-preview" src="{%picture%}" />
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-xl-12">
                    <div class="demo text-right">
                        <a href="{%SERVER%}/{%MODULE%}/usuarios" type="button" class="btn btn-lg btn-default waves-effect waves-themed">
                            <span class="fal fa-times mr-1"></span>
                            Cancelar
                        </a>
                        <button type="submit" class="btn btn-lg btn-primary waves-effect waves-themed">
                            <span class="fal fa-check mr-1"></span>
                            Enviar
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</main>
